---
phase: 19-admin-bug-fixes
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - admin.html
autonomous: true
requirements:
  - ADM-04
  - ADM-06
  - ADM-07

must_haves:
  truths:
    - "No reference to --transition-normal exists in admin.html -- all replaced with --transition-medium"
    - "user-card__posts and user-card__date spans have CSS definitions that make them visible"
    - "Dead CSS from old user-card design iteration is removed"
  artifacts:
    - path: "admin.html"
      provides: "Fixed transition variable references, added missing user-card CSS, removed dead CSS"
  key_links:
    - from: "admin.html"
      to: "js/admin.js"
      via: "user-card__posts and user-card__date classes used in renderUsers template"
      pattern: "user-card__posts"
---

<objective>
Fix CSS issues in admin.html's inline styles: replace undefined --transition-normal references, add missing user-card CSS definitions, and remove dead CSS from old design iterations.

Purpose: --transition-normal references in admin.html point to a variable that exists in style.css but was intended as --transition-medium for admin context. user-card__posts and user-card__date are used in JS template literals but have no CSS rules, making them unstyled. Dead CSS from an older user-card design wastes bytes.
Output: Consistent transition timing, properly styled user card meta elements, cleaner stylesheet.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@admin.html
@js/admin.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace --transition-normal with --transition-medium in admin.html</name>
  <files>admin.html</files>
  <action>
**ADM-04 -- Replace --transition-normal references:**

In admin.html's inline `<style>` block, there are two places that reference `--transition-normal`:

1. Line 651 (model bar segment transition):
```css
.model-bar__segment {
    transition: width var(--transition-normal);
}
```

Change to:
```css
.model-bar__segment {
    transition: width var(--transition-medium);
}
```

Note: `--transition-normal` IS defined in style.css's `:root` (line 82: `--transition-normal: 250ms ease;`) and `--transition-medium` is ALSO defined (line 70: `--transition-medium: 250ms ease;`). They currently have the same value. However, the project convention in admin.html uses `--transition-fast` everywhere else, and the roadmap specifically says to replace `--transition-normal` references with `--transition-medium`. Follow the requirement as written.

Also check js/admin.js line 810 which has an inline style `transition: width var(--transition-normal)` in the model distribution bar HTML template. This is in a JS string, not the CSS block:
```javascript
return `<div style="width: ${pct}%; background: ${m.color}; transition: width var(--transition-normal);" ...></div>`;
```

Change to:
```javascript
return `<div style="width: ${pct}%; background: ${m.color}; transition: width var(--transition-medium);" ...></div>`;
```

Wait -- js/admin.js is modified by Plan 01. To avoid file conflicts in Wave 1, handle the js/admin.js change in this plan since it's a simple one-line string replacement. Actually, both Plan 01 and Plan 02 are in Wave 1 and cannot both modify js/admin.js.

REVISED: Only fix the reference in admin.html's `<style>` block (line 651). The js/admin.js reference on line 810 will be fixed in Plan 03 (Wave 2) which also modifies js/admin.js.

In admin.html, find:
```css
.model-bar__segment {
    transition: width var(--transition-normal);
}
```

Replace with:
```css
.model-bar__segment {
    transition: width var(--transition-medium);
}
```

That's the only `--transition-normal` reference in admin.html's CSS block.
  </action>
  <verify>
    <automated>cd C:/Users/mmcge/the-commons && ! grep "transition-normal" admin.html && echo "ADM-04 admin.html OK"</automated>
  </verify>
  <done>All --transition-normal references in admin.html replaced with --transition-medium.</done>
</task>

<task type="auto">
  <name>Task 2: Add missing user-card CSS definitions and remove dead CSS</name>
  <files>admin.html</files>
  <action>
**ADM-06 -- Add CSS definitions for user-card__posts and user-card__date:**

The `renderUsers` function in admin.js (lines 717-718) generates these elements:
```html
<span class="user-card__posts">5 posts</span>
<span class="user-card__date">Jan 15, 2026</span>
```

But no CSS rules exist for `.user-card__posts` or `.user-card__date`. They inherit from `.user-card__meta` (their parent), which sets `font-size: 0.8125rem` and `color: var(--text-muted)`. However, they have no specific styling. They should match the existing meta pattern but be explicitly defined.

Add these rules in admin.html's `<style>` block, after the `.user-card__meta` rule (around line 454):

```css
.user-card__posts {
    font-size: 0.8125rem;
    color: var(--text-muted);
}

.user-card__date {
    font-size: 0.8125rem;
    color: var(--text-muted);
}
```

These inherit from the parent but having explicit definitions ensures they're visible and styleable independently.

**ADM-07 -- Remove dead CSS from old user-card design iteration:**

The admin.html `<style>` block contains CSS from two overlapping user-card design iterations. Looking at the HTML template in `renderUsers()` (admin.js lines 704-749), the actual markup uses:

Used classes (keep):
- `.user-card` -- the outer container
- `.user-card__header` -- clickable header with onclick="toggleUserCard(this)"
- `.user-card__info` -- wrapper for email + name
- `.user-card__email` -- email text
- `.user-card__name` -- display name
- `.user-card__meta` -- flex container for identities count, posts, date, expand
- `.user-card__identities` -- identity count text (styled with accent-gold)
- `.user-card__posts` -- post count (just added above)
- `.user-card__date` -- date (just added above)
- `.user-card__expand` -- the down arrow
- `.user-card__details` -- collapsible body
- `.user-card__identities-list h4` -- heading inside details
- `.user-card__no-identities` -- empty state text
- `.user-card__actions` -- action buttons in details
- `.user-card.expanded` -- expanded state modifier

Dead classes (remove):
- `.user-card__badge` -- not used in any renderUsers template; old admin badge design
- `.user-card__toggle` -- replaced by `.user-card__expand`; old toggle arrow
- `.user-card__body` -- replaced by `.user-card__details`; old body container
- `.user-card.expanded .user-card__toggle` -- old toggle rotation
- `.user-card.expanded .user-card__body` -- old body display

Remove these CSS rules from the `<style>` block:

1. `.user-card__badge` rule (around line 457-463)
2. `.user-card__toggle` rule (around line 466-469)
3. `.user-card.expanded .user-card__toggle` rule (around line 472-474)
4. `.user-card__body` rule (around line 476-480)
5. `.user-card.expanded .user-card__body` rule (around line 482-484)

Verify: Search admin.js for any of these class names to confirm they're not used:
- "user-card__badge" -- NOT in renderUsers template
- "user-card__toggle" -- NOT in renderUsers template (it uses "user-card__expand")
- "user-card__body" -- NOT in renderUsers template (it uses "user-card__details")

Keep `.user-card__identities` (line 553-554) even though it has a duplicate declaration -- the second one adds `color: var(--accent-gold)` which is intentional styling for the identity count.
  </action>
  <verify>
    <automated>cd C:/Users/mmcge/the-commons && grep -q "user-card__posts" admin.html && grep -q "user-card__date" admin.html && ! grep -q "user-card__badge" admin.html && ! grep -q "user-card__toggle" admin.html && ! grep -q "user-card__body" admin.html && echo "ADM-06 and ADM-07 OK"</automated>
  </verify>
  <done>user-card__posts and user-card__date have CSS definitions. Dead CSS for user-card__badge, user-card__toggle, and user-card__body removed.</done>
</task>

</tasks>

<verification>
- Open admin.html in browser, navigate to Users tab
- User cards should display properly with posts count and date visible in the meta row
- Model distribution bar should animate smoothly (using --transition-medium)
- View source: no --transition-normal in the style block, no user-card__badge/toggle/body CSS rules
</verification>

<success_criteria>
- No --transition-normal references in admin.html
- .user-card__posts and .user-card__date CSS rules exist in admin.html style block
- .user-card__badge, .user-card__toggle, .user-card__body CSS rules removed
- .user-card.expanded .user-card__toggle and .user-card.expanded .user-card__body rules removed
</success_criteria>

<output>
After completion, create `.planning/phases/19-admin-bug-fixes/19-02-SUMMARY.md`
</output>
